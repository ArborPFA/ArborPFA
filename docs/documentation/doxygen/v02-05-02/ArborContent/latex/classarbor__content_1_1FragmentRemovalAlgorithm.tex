\section{arbor\+\_\+content\+:\+:Fragment\+Removal\+Algorithm Class Reference}
\label{classarbor__content_1_1FragmentRemovalAlgorithm}\index{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}}


\doxyref{Fragment\+Removal\+Algorithm}{p.}{classarbor__content_1_1FragmentRemovalAlgorithm} class.  




{\ttfamily \#include $<$Fragment\+Removal\+Algorithm.\+h$>$}

Inheritance diagram for arbor\+\_\+content\+:\+:Fragment\+Removal\+Algorithm\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classarbor__content_1_1FragmentRemovalAlgorithm}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class {\bf Factory}
\begin{DoxyCompactList}\small\item\em \doxyref{Factory}{p.}{classarbor__content_1_1FragmentRemovalAlgorithm_1_1Factory} class for instantiating algorithm. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
pandora\+::\+Status\+Code {\bf Run} ()
\item 
pandora\+::\+Status\+Code {\bf Read\+Settings} (const pandora\+::\+Ti\+Xml\+Handle xml\+Handle)
\item 
pandora\+::\+Status\+Code {\bf Find\+Cluster\+Fragments} (pandora\+::\+Cluster\+Vector \&cluster\+Vector) const 
\begin{DoxyCompactList}\small\item\em Find cluster fragments in the event. \end{DoxyCompactList}\item 
pandora\+::\+Status\+Code {\bf Remove\+Cluster\+Fragments} (const pandora\+::\+Cluster\+Vector \&cluster\+Vector, pandora\+::\+Calo\+Hit\+List \&removal\+Calo\+Hit\+List) const 
\begin{DoxyCompactList}\small\item\em Remove cluster fragments and grab their calo hits. \end{DoxyCompactList}\item 
pandora\+::\+Status\+Code {\bf Get\+Merging\+Clusters} (pandora\+::\+Cluster\+Vector \&cluster\+Vector) const 
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
unsigned int {\bf m\+\_\+max\+N\+Hits\+For\+Automatic\+Removal}
\item 
float {\bf m\+\_\+max\+Energy\+For\+Automatic\+Removal}
\item 
float {\bf m\+\_\+max\+Hadronic\+Energy\+For\+Automatic\+Removal}
\item 
unsigned int {\bf m\+\_\+max\+N\+Hits\+Non\+Fragments}
\item 
float {\bf m\+\_\+max\+Energy\+Non\+Fragments}
\item 
float {\bf m\+\_\+max\+Fragment\+Density}
\item 
float {\bf m\+\_\+max\+Proximity\+Distance\+Fine}
\item 
float {\bf m\+\_\+max\+Proximity\+Distance\+Coarse}
\item 
unsigned int {\bf m\+\_\+max\+N\+Hits\+Proximity}
\item 
pandora\+::\+String\+Vector {\bf m\+\_\+additional\+Cluster\+Merging\+List\+Names}
\item 
{\bf Calo\+Hit\+Merging\+Tool} $\ast$ {\bf m\+\_\+p\+Calo\+Hit\+Merging\+Tool}
\begin{DoxyCompactList}\small\item\em The calo hit merging tool. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
\doxyref{Fragment\+Removal\+Algorithm}{p.}{classarbor__content_1_1FragmentRemovalAlgorithm} class. 

Definition at line 44 of file Fragment\+Removal\+Algorithm.\+h.



\subsection{Member Function Documentation}
\index{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}!Find\+Cluster\+Fragments@{Find\+Cluster\+Fragments}}
\index{Find\+Cluster\+Fragments@{Find\+Cluster\+Fragments}!arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}}
\subsubsection[{Find\+Cluster\+Fragments}]{\setlength{\rightskip}{0pt plus 5cm}pandora\+::\+Status\+Code arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm\+::\+Find\+Cluster\+Fragments (
\begin{DoxyParamCaption}
\item[{pandora\+::\+Cluster\+Vector \&}]{cluster\+Vector}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1FragmentRemovalAlgorithm_abadc37e6998a49963f1ad8e355901009}


Find cluster fragments in the event. 


\begin{DoxyParams}{Parameters}
{\em cluster\+Vector} & the vector of cluster fragment to receive \\
\hline
\end{DoxyParams}


Definition at line 66 of file Fragment\+Removal\+Algorithm.\+cc.



References arbor\+\_\+content\+::\+Cluster\+Helper\+::\+Contains\+Hit\+Type(), arbor\+\_\+content\+::\+Cluster\+Helper\+::\+Get\+Mean\+Density(), m\+\_\+max\+Energy\+For\+Automatic\+Removal, m\+\_\+max\+Energy\+Non\+Fragments, m\+\_\+max\+Fragment\+Density, m\+\_\+max\+Hadronic\+Energy\+For\+Automatic\+Removal, m\+\_\+max\+N\+Hits\+For\+Automatic\+Removal, m\+\_\+max\+N\+Hits\+Non\+Fragments, m\+\_\+max\+N\+Hits\+Proximity, m\+\_\+max\+Proximity\+Distance\+Coarse, and m\+\_\+max\+Proximity\+Distance\+Fine.



Referenced by Run().


\begin{DoxyCode}
67   \{
68     \textcolor{keyword}{const} pandora::ClusterList *pClusterList = NULL;
69     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, PandoraContentApi::GetCurrentList(*\textcolor{keyword}{this}, 
      pClusterList));
70 
71     \textcolor{keywordflow}{if}(pClusterList->empty())
72       \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
73 
74     pandora::ClusterVector clusterVector(pClusterList->begin(), pClusterList->end());
75     pandora::ClusterVector nonFragmentsClusterVector;
76     pandora::ClusterVector potentialFragmentsClusterVector;
77 
78     \textcolor{comment}{// loop over clusters and identify fragments}
79     \textcolor{keywordflow}{for}(pandora::ClusterVector::iterator clusterIter = clusterVector.begin(), clusterEndIter = 
      clusterVector.end() ;
80         clusterEndIter != clusterIter ; ++clusterIter)
81     \{
82       \textcolor{keyword}{const} pandora::Cluster *\textcolor{keyword}{const} pCluster(*clusterIter);
83 
84       \textcolor{keywordflow}{if}(pCluster->IsPhotonFast(this->GetPandora()))
85         \textcolor{keywordflow}{continue};
86 
87       \textcolor{comment}{// discriminate charged particles}
88       \textcolor{keywordflow}{if}(!pCluster->GetAssociatedTrackList().empty())
89       \{
90         nonFragmentsClusterVector.push\_back(pCluster);
91         \textcolor{keywordflow}{continue};
92       \}
93 
94       \textcolor{comment}{// too big for a fragment ?}
95       \textcolor{keywordflow}{if}(pCluster->GetNCaloHits() > m_maxNHitsNonFragments || pCluster->GetHadronicEnergy() > 
      m_maxEnergyNonFragments)
96       \{
97         nonFragmentsClusterVector.push\_back(pCluster);
98         \textcolor{keywordflow}{continue};
99       \}
100 
101       \textcolor{comment}{// too less hits or energy for a 'real' cluster ?}
102       \textcolor{keywordflow}{if}(pCluster->GetNCaloHits() < m_maxNHitsForAutomaticRemoval || pCluster->GetHadronicEnergy() < 
      m_maxEnergyForAutomaticRemoval)
103       \{
104         removalClusterVector.push\_back(pCluster);
105         \textcolor{keywordflow}{continue};
106       \}
107 
108       \textcolor{keywordflow}{if}( (!ClusterHelper::ContainsHitType(pCluster, pandora::ECAL)) &&
109           (!ClusterHelper::ContainsHitType(pCluster, pandora::MUON)) &&
110           (pCluster->GetHadronicEnergy() < 
      m_maxHadronicEnergyForAutomaticRemoval))
111       \{
112         removalClusterVector.push\_back(pCluster);
113         \textcolor{keywordflow}{continue};
114       \}
115 
116       \textcolor{keywordflow}{if}(pCluster->GetInnerPseudoLayer() == pCluster->GetOuterPseudoLayer())
117       \{
118         removalClusterVector.push\_back(pCluster);
119         \textcolor{keywordflow}{continue};
120       \}
121 
122       \textcolor{comment}{// Real neutral fragments should escaping from showers should}
123       \textcolor{comment}{// have been merged by topological association before this step.}
124       \textcolor{comment}{// What remains is 'cloudy' structures.}
125       \textcolor{comment}{// Play with cluster mean density and similar variables to discriminate}
126       \textcolor{keywordtype}{float} meanDensity(0.f);
127       PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, 
      ClusterHelper::GetMeanDensity(pCluster, meanDensity));
128 
129       \textcolor{keywordflow}{if}(meanDensity < m_maxFragmentDensity)
130       \{
131         potentialFragmentsClusterVector.push\_back(pCluster);
132         \textcolor{keywordflow}{continue};
133       \}
134     \}
135 
136     \textcolor{keywordflow}{for}(pandora::ClusterVector::const\_iterator fragIter = potentialFragmentsClusterVector.begin(), 
      fragEndIter = potentialFragmentsClusterVector.end() ;
137         fragEndIter != fragIter ; ++fragIter)
138     \{
139       \textcolor{keyword}{const} pandora::Cluster *\textcolor{keyword}{const} pFragmentCluster(*fragIter);
140 
141       pandora::CaloHitList fragmentCaloHitList;
142       pFragmentCluster->GetOrderedCaloHitList().GetCaloHitList(fragmentCaloHitList);
143 
144       \textcolor{keywordtype}{bool} foundNearbyCluster(\textcolor{keyword}{false});
145       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} nHitsContact(0);
146 
147       \textcolor{keywordflow}{for}(pandora::ClusterVector::const\_iterator iter = clusterVector.begin(), endIter = clusterVector.end(
      ) ;
148           endIter != iter ; ++iter)
149       \{
150         \textcolor{keyword}{const} pandora::Cluster *\textcolor{keyword}{const} pCluster(*iter);
151 
152         \textcolor{keywordflow}{if}(foundNearbyCluster)
153           \textcolor{keywordflow}{break};
154 
155         \textcolor{keywordflow}{if}(pCluster == pFragmentCluster)
156           \textcolor{keywordflow}{continue};
157 
158         pandora::CaloHitList clusterCaloHitList;
159         pCluster->GetOrderedCaloHitList().GetCaloHitList(clusterCaloHitList);
160 
161         \textcolor{keywordflow}{for}(pandora::CaloHitList::const\_iterator hitIter = fragmentCaloHitList.begin(), hitEndIter = 
      fragmentCaloHitList.end() ;
162             hitEndIter != hitIter ; ++hitIter)
163         \{
164           \textcolor{keyword}{const} pandora::CaloHit *\textcolor{keyword}{const} pCaloHit(*hitIter);
165 
166           \textcolor{keywordflow}{if}(foundNearbyCluster)
167             \textcolor{keywordflow}{break};
168 
169           \textcolor{keyword}{const} pandora::CartesianVector position(pCaloHit->GetPositionVector());
170           \textcolor{keyword}{const} pandora::Granularity granularity(this->GetPandora().GetGeometry()->GetHitTypeGranularity(
      pCaloHit->GetHitType()));
171           \textcolor{keyword}{const} \textcolor{keywordtype}{float} maxProximityDistance(granularity <= pandora::FINE ? 
      m_maxProximityDistanceFine : m_maxProximityDistanceCoarse);
172 
173           \textcolor{keywordflow}{for}(pandora::CaloHitList::const\_iterator hitIter2 = clusterCaloHitList.begin(), hitEndIter2 = 
      clusterCaloHitList.end() ;
174               hitEndIter2 != hitIter2 ; ++hitIter2)
175           \{
176             \textcolor{keyword}{const} pandora::CaloHit *\textcolor{keyword}{const} pCaloHit2(*hitIter2);
177 
178             \textcolor{keyword}{const} pandora::CartesianVector position2(pCaloHit2->GetPositionVector());
179             \textcolor{keyword}{const} \textcolor{keywordtype}{float} distance((position-position2).GetMagnitude());
180 
181             \textcolor{keywordflow}{if}(distance < maxProximityDistance)
182               ++nHitsContact;
183 
184             \textcolor{keywordflow}{if}(nHitsContact > m_maxNHitsProximity)
185             \{
186               foundNearbyCluster = \textcolor{keyword}{true};
187               \textcolor{keywordflow}{break};
188             \}
189           \}
190         \}
191       \}
192 
193       \textcolor{keywordflow}{if}(foundNearbyCluster)
194         removalClusterVector.push\_back(pFragmentCluster);
195     \}
196 
197     \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
198   \}
\end{DoxyCode}
\index{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}!Get\+Merging\+Clusters@{Get\+Merging\+Clusters}}
\index{Get\+Merging\+Clusters@{Get\+Merging\+Clusters}!arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}}
\subsubsection[{Get\+Merging\+Clusters}]{\setlength{\rightskip}{0pt plus 5cm}pandora\+::\+Status\+Code arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm\+::\+Get\+Merging\+Clusters (
\begin{DoxyParamCaption}
\item[{pandora\+::\+Cluster\+Vector \&}]{cluster\+Vector}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1FragmentRemovalAlgorithm_a404224ff7bcd561677a575a7a33b2b0b}


Definition at line 221 of file Fragment\+Removal\+Algorithm.\+cc.



References m\+\_\+additional\+Cluster\+Merging\+List\+Names.



Referenced by Run().


\begin{DoxyCode}
222   \{
223     \textcolor{comment}{// get current cluster list}
224     \textcolor{keyword}{const} pandora::ClusterList *pClusterList = NULL;
225     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, PandoraContentApi::GetCurrentList(*\textcolor{keyword}{this}, 
      pClusterList));
226 
227     pandora::ClusterList clusterList(pClusterList->begin(), pClusterList->end());
228 
229     \textcolor{comment}{// get additional cluster lists}
230     \textcolor{keywordflow}{for}(pandora::StringVector::const\_iterator iter = 
      m_additionalClusterMergingListNames.begin(), endIter = 
      m_additionalClusterMergingListNames.end() ;
231         endIter != iter ; ++iter)
232     \{
233       \textcolor{keyword}{const} pandora::ClusterList *pAdditionalClusterList = NULL;
234 
235       \textcolor{keywordflow}{if}(pandora::STATUS\_CODE\_SUCCESS != PandoraContentApi::GetList(*\textcolor{keyword}{this}, *iter, pAdditionalClusterList))
236       \{
237         std::cout << \textcolor{stringliteral}{"FragmentRemovalAlgorithm: additional cluster list '"} << *iter << \textcolor{stringliteral}{"' is not available"}
       << std::endl;
238         \textcolor{keywordflow}{continue};
239       \}
240 
241       clusterList.insert(pAdditionalClusterList->begin(), pAdditionalClusterList->end());
242     \}
243 
244     clusterVector.insert(clusterVector.end(), clusterList.begin(), clusterList.end());
245 
246     \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
247   \}
\end{DoxyCode}
\index{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}!Read\+Settings@{Read\+Settings}}
\index{Read\+Settings@{Read\+Settings}!arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}}
\subsubsection[{Read\+Settings}]{\setlength{\rightskip}{0pt plus 5cm}pandora\+::\+Status\+Code arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm\+::\+Read\+Settings (
\begin{DoxyParamCaption}
\item[{const pandora\+::\+Ti\+Xml\+Handle}]{xml\+Handle}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1FragmentRemovalAlgorithm_ad3e0b01f34f73201918e762e72a7165c}


Definition at line 251 of file Fragment\+Removal\+Algorithm.\+cc.



References m\+\_\+additional\+Cluster\+Merging\+List\+Names, m\+\_\+max\+Energy\+For\+Automatic\+Removal, m\+\_\+max\+Energy\+Non\+Fragments, m\+\_\+max\+Fragment\+Density, m\+\_\+max\+Hadronic\+Energy\+For\+Automatic\+Removal, m\+\_\+max\+N\+Hits\+For\+Automatic\+Removal, m\+\_\+max\+N\+Hits\+Non\+Fragments, m\+\_\+max\+N\+Hits\+Proximity, m\+\_\+max\+Proximity\+Distance\+Coarse, m\+\_\+max\+Proximity\+Distance\+Fine, and m\+\_\+p\+Calo\+Hit\+Merging\+Tool.


\begin{DoxyCode}
252   \{
253     m_maxNHitsForAutomaticRemoval = 6;
254     PANDORA\_RETURN\_RESULT\_IF\_AND\_IF(pandora::STATUS\_CODE\_SUCCESS, pandora::STATUS\_CODE\_NOT\_FOUND, !=, 
      pandora::XmlHelper::ReadValue(xmlHandle,
255         \textcolor{stringliteral}{"MaxNHitsForAutomaticRemoval"}, m_maxNHitsForAutomaticRemoval));
256 
257     m_maxEnergyForAutomaticRemoval = 0.1f;
258     PANDORA\_RETURN\_RESULT\_IF\_AND\_IF(pandora::STATUS\_CODE\_SUCCESS, pandora::STATUS\_CODE\_NOT\_FOUND, !=, 
      pandora::XmlHelper::ReadValue(xmlHandle,
259         \textcolor{stringliteral}{"MaxEnergyForAutomaticRemoval"}, m_maxEnergyForAutomaticRemoval));
260 
261     m_maxHadronicEnergyForAutomaticRemoval = 0.5f;
262     PANDORA\_RETURN\_RESULT\_IF\_AND\_IF(pandora::STATUS\_CODE\_SUCCESS, pandora::STATUS\_CODE\_NOT\_FOUND, !=, 
      pandora::XmlHelper::ReadValue(xmlHandle,
263         \textcolor{stringliteral}{"MaxHadronicEnergyForAutomaticRemoval"}, 
      m_maxHadronicEnergyForAutomaticRemoval));
264 
265     m_maxNHitsNonFragments = 30;
266     PANDORA\_RETURN\_RESULT\_IF\_AND\_IF(pandora::STATUS\_CODE\_SUCCESS, pandora::STATUS\_CODE\_NOT\_FOUND, !=, 
      pandora::XmlHelper::ReadValue(xmlHandle,
267         \textcolor{stringliteral}{"MaxNHitsNonFragments"}, m_maxNHitsNonFragments));
268 
269     m_maxEnergyNonFragments = 3.f;
270     PANDORA\_RETURN\_RESULT\_IF\_AND\_IF(pandora::STATUS\_CODE\_SUCCESS, pandora::STATUS\_CODE\_NOT\_FOUND, !=, 
      pandora::XmlHelper::ReadValue(xmlHandle,
271         \textcolor{stringliteral}{"MaxEnergyNonFragments"}, m_maxEnergyNonFragments));
272 
273     m_maxFragmentDensity = 0.3f;
274     PANDORA\_RETURN\_RESULT\_IF\_AND\_IF(pandora::STATUS\_CODE\_SUCCESS, pandora::STATUS\_CODE\_NOT\_FOUND, !=, 
      pandora::XmlHelper::ReadValue(xmlHandle,
275         \textcolor{stringliteral}{"MaxFragmentDensity"}, m_maxFragmentDensity));
276 
277     m_maxProximityDistanceFine = 20.f;
278     PANDORA\_RETURN\_RESULT\_IF\_AND\_IF(pandora::STATUS\_CODE\_SUCCESS, pandora::STATUS\_CODE\_NOT\_FOUND, !=, 
      pandora::XmlHelper::ReadValue(xmlHandle,
279         \textcolor{stringliteral}{"MaxProximityDistanceFine"}, m_maxProximityDistanceFine));
280 
281     m_maxProximityDistanceCoarse = 40.f;
282     PANDORA\_RETURN\_RESULT\_IF\_AND\_IF(pandora::STATUS\_CODE\_SUCCESS, pandora::STATUS\_CODE\_NOT\_FOUND, !=, 
      pandora::XmlHelper::ReadValue(xmlHandle,
283         \textcolor{stringliteral}{"MaxProximityDistanceCoarse"}, m_maxProximityDistanceCoarse));
284 
285     m_maxNHitsProximity = 5;
286     PANDORA\_RETURN\_RESULT\_IF\_AND\_IF(pandora::STATUS\_CODE\_SUCCESS, pandora::STATUS\_CODE\_NOT\_FOUND, !=, 
      pandora::XmlHelper::ReadValue(xmlHandle,
287         \textcolor{stringliteral}{"MaxNHitsProximity"}, m_maxNHitsProximity));
288 
289     PANDORA\_RETURN\_RESULT\_IF\_AND\_IF(pandora::STATUS\_CODE\_SUCCESS, pandora::STATUS\_CODE\_NOT\_FOUND, !=, 
      pandora::XmlHelper::ReadVectorOfValues(xmlHandle,
290         \textcolor{stringliteral}{"AdditionalClusterMergingListNames"}, m_additionalClusterMergingListNames));
291 
292     m_pCaloHitMergingTool = NULL;
293     pandora::AlgorithmTool *pAlgorithmTool = NULL;
294     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, pandora::XmlHelper::ProcessAlgorithmTool(*\textcolor{keyword}{
      this}, xmlHandle,
295         \textcolor{stringliteral}{"CaloHitMerging"}, pAlgorithmTool));
296 
297     m_pCaloHitMergingTool = \textcolor{keyword}{dynamic\_cast<}CaloHitMergingTool*\textcolor{keyword}{>}(pAlgorithmTool);
298 
299     \textcolor{keywordflow}{if}(NULL == m_pCaloHitMergingTool)
300       \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_INVALID\_PARAMETER;
301 
302     \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
303   \}
\end{DoxyCode}
\index{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}!Remove\+Cluster\+Fragments@{Remove\+Cluster\+Fragments}}
\index{Remove\+Cluster\+Fragments@{Remove\+Cluster\+Fragments}!arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}}
\subsubsection[{Remove\+Cluster\+Fragments}]{\setlength{\rightskip}{0pt plus 5cm}pandora\+::\+Status\+Code arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm\+::\+Remove\+Cluster\+Fragments (
\begin{DoxyParamCaption}
\item[{const pandora\+::\+Cluster\+Vector \&}]{cluster\+Vector, }
\item[{pandora\+::\+Calo\+Hit\+List \&}]{removal\+Calo\+Hit\+List}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1FragmentRemovalAlgorithm_aee05b283798cd0bf9266d63fdfd45c74}


Remove cluster fragments and grab their calo hits. 


\begin{DoxyParams}{Parameters}
{\em cluster\+Vector} & the vector of cluster fragment to remove \\
\hline
{\em removal\+Calo\+Hit\+List} & the cluster fragment calo hits to receive \\
\hline
\end{DoxyParams}


Definition at line 202 of file Fragment\+Removal\+Algorithm.\+cc.



References arbor\+\_\+content\+::\+Calo\+Hit\+Helper\+::\+Remove\+Connections().



Referenced by Run().


\begin{DoxyCode}
203   \{
204     \textcolor{keywordflow}{for}(pandora::ClusterVector::const\_iterator iter = clusterVector.begin(), endIter = clusterVector.end() 
      ;
205         endIter != iter ; ++iter)
206     \{
207       pandora::CaloHitList caloHitList;
208       (*iter)->GetOrderedCaloHitList().GetCaloHitList(caloHitList);
209 
210       PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, 
      CaloHitHelper::RemoveConnections(&caloHitList));
211       PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, PandoraContentApi::Delete(*\textcolor{keyword}{this}, *iter));
212 
213       removalCaloHitList.insert(caloHitList.begin(), caloHitList.end());
214     \}
215 
216     \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
217   \}
\end{DoxyCode}
\index{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}!Run@{Run}}
\index{Run@{Run}!arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}}
\subsubsection[{Run}]{\setlength{\rightskip}{0pt plus 5cm}pandora\+::\+Status\+Code arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm\+::\+Run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1FragmentRemovalAlgorithm_a3e4aeb07f056cc72258a39d4442611a1}


Definition at line 43 of file Fragment\+Removal\+Algorithm.\+cc.



References Find\+Cluster\+Fragments(), Get\+Merging\+Clusters(), m\+\_\+p\+Calo\+Hit\+Merging\+Tool, arbor\+\_\+content\+::\+Calo\+Hit\+Merging\+Tool\+::\+Merge\+Calo\+Hits(), and Remove\+Cluster\+Fragments().


\begin{DoxyCode}
44   \{
45     \textcolor{comment}{// find cluster fragments to remove}
46     pandora::ClusterVector removalClusterVector;
47     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, this->
      FindClusterFragments(removalClusterVector));
48 
49     \textcolor{keywordflow}{if}(removalClusterVector.empty())
50       \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
51 
52     \textcolor{comment}{// remove fragments and grab their calo hits}
53     pandora::CaloHitList removalCaloHitList;
54     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, this->
      RemoveClusterFragments(removalClusterVector, removalCaloHitList));
55 
56     \textcolor{comment}{// merge hits in remaining clusters}
57     pandora::ClusterVector clusterVector;
58     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, this->
      GetMergingClusters(clusterVector));
59     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, 
      m_pCaloHitMergingTool->MergeCaloHits(*\textcolor{keyword}{this}, removalCaloHitList, clusterVector));
60 
61     \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
62   \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}!m\+\_\+additional\+Cluster\+Merging\+List\+Names@{m\+\_\+additional\+Cluster\+Merging\+List\+Names}}
\index{m\+\_\+additional\+Cluster\+Merging\+List\+Names@{m\+\_\+additional\+Cluster\+Merging\+List\+Names}!arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}}
\subsubsection[{m\+\_\+additional\+Cluster\+Merging\+List\+Names}]{\setlength{\rightskip}{0pt plus 5cm}pandora\+::\+String\+Vector arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm\+::m\+\_\+additional\+Cluster\+Merging\+List\+Names\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1FragmentRemovalAlgorithm_accbd95be4d4483b681edb34858600ac2}


Definition at line 90 of file Fragment\+Removal\+Algorithm.\+h.



Referenced by Get\+Merging\+Clusters(), and Read\+Settings().

\index{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}!m\+\_\+max\+Energy\+For\+Automatic\+Removal@{m\+\_\+max\+Energy\+For\+Automatic\+Removal}}
\index{m\+\_\+max\+Energy\+For\+Automatic\+Removal@{m\+\_\+max\+Energy\+For\+Automatic\+Removal}!arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}}
\subsubsection[{m\+\_\+max\+Energy\+For\+Automatic\+Removal}]{\setlength{\rightskip}{0pt plus 5cm}float arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm\+::m\+\_\+max\+Energy\+For\+Automatic\+Removal\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1FragmentRemovalAlgorithm_aee7eed3b83017a4163a327cc6cbea44f}


Definition at line 82 of file Fragment\+Removal\+Algorithm.\+h.



Referenced by Find\+Cluster\+Fragments(), and Read\+Settings().

\index{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}!m\+\_\+max\+Energy\+Non\+Fragments@{m\+\_\+max\+Energy\+Non\+Fragments}}
\index{m\+\_\+max\+Energy\+Non\+Fragments@{m\+\_\+max\+Energy\+Non\+Fragments}!arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}}
\subsubsection[{m\+\_\+max\+Energy\+Non\+Fragments}]{\setlength{\rightskip}{0pt plus 5cm}float arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm\+::m\+\_\+max\+Energy\+Non\+Fragments\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1FragmentRemovalAlgorithm_ad5c419de3f39549342ebc39b1c9952a0}


Definition at line 85 of file Fragment\+Removal\+Algorithm.\+h.



Referenced by Find\+Cluster\+Fragments(), and Read\+Settings().

\index{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}!m\+\_\+max\+Fragment\+Density@{m\+\_\+max\+Fragment\+Density}}
\index{m\+\_\+max\+Fragment\+Density@{m\+\_\+max\+Fragment\+Density}!arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}}
\subsubsection[{m\+\_\+max\+Fragment\+Density}]{\setlength{\rightskip}{0pt plus 5cm}float arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm\+::m\+\_\+max\+Fragment\+Density\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1FragmentRemovalAlgorithm_a1957df5d739bcd3e930f9518a6afe11f}


Definition at line 86 of file Fragment\+Removal\+Algorithm.\+h.



Referenced by Find\+Cluster\+Fragments(), and Read\+Settings().

\index{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}!m\+\_\+max\+Hadronic\+Energy\+For\+Automatic\+Removal@{m\+\_\+max\+Hadronic\+Energy\+For\+Automatic\+Removal}}
\index{m\+\_\+max\+Hadronic\+Energy\+For\+Automatic\+Removal@{m\+\_\+max\+Hadronic\+Energy\+For\+Automatic\+Removal}!arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}}
\subsubsection[{m\+\_\+max\+Hadronic\+Energy\+For\+Automatic\+Removal}]{\setlength{\rightskip}{0pt plus 5cm}float arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm\+::m\+\_\+max\+Hadronic\+Energy\+For\+Automatic\+Removal\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1FragmentRemovalAlgorithm_ae09e84e08d2c798d5dd3313a4cf2d207}


Definition at line 83 of file Fragment\+Removal\+Algorithm.\+h.



Referenced by Find\+Cluster\+Fragments(), and Read\+Settings().

\index{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}!m\+\_\+max\+N\+Hits\+For\+Automatic\+Removal@{m\+\_\+max\+N\+Hits\+For\+Automatic\+Removal}}
\index{m\+\_\+max\+N\+Hits\+For\+Automatic\+Removal@{m\+\_\+max\+N\+Hits\+For\+Automatic\+Removal}!arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}}
\subsubsection[{m\+\_\+max\+N\+Hits\+For\+Automatic\+Removal}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm\+::m\+\_\+max\+N\+Hits\+For\+Automatic\+Removal\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1FragmentRemovalAlgorithm_a13bfb567651c16fd471b3623f1663db9}


Definition at line 81 of file Fragment\+Removal\+Algorithm.\+h.



Referenced by Find\+Cluster\+Fragments(), and Read\+Settings().

\index{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}!m\+\_\+max\+N\+Hits\+Non\+Fragments@{m\+\_\+max\+N\+Hits\+Non\+Fragments}}
\index{m\+\_\+max\+N\+Hits\+Non\+Fragments@{m\+\_\+max\+N\+Hits\+Non\+Fragments}!arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}}
\subsubsection[{m\+\_\+max\+N\+Hits\+Non\+Fragments}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm\+::m\+\_\+max\+N\+Hits\+Non\+Fragments\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1FragmentRemovalAlgorithm_acb8524f457b736d3d8fe62b80b0ff8dd}


Definition at line 84 of file Fragment\+Removal\+Algorithm.\+h.



Referenced by Find\+Cluster\+Fragments(), and Read\+Settings().

\index{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}!m\+\_\+max\+N\+Hits\+Proximity@{m\+\_\+max\+N\+Hits\+Proximity}}
\index{m\+\_\+max\+N\+Hits\+Proximity@{m\+\_\+max\+N\+Hits\+Proximity}!arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}}
\subsubsection[{m\+\_\+max\+N\+Hits\+Proximity}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm\+::m\+\_\+max\+N\+Hits\+Proximity\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1FragmentRemovalAlgorithm_ae99fd8f8e0e92af43f9115a05de38a84}


Definition at line 89 of file Fragment\+Removal\+Algorithm.\+h.



Referenced by Find\+Cluster\+Fragments(), and Read\+Settings().

\index{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}!m\+\_\+max\+Proximity\+Distance\+Coarse@{m\+\_\+max\+Proximity\+Distance\+Coarse}}
\index{m\+\_\+max\+Proximity\+Distance\+Coarse@{m\+\_\+max\+Proximity\+Distance\+Coarse}!arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}}
\subsubsection[{m\+\_\+max\+Proximity\+Distance\+Coarse}]{\setlength{\rightskip}{0pt plus 5cm}float arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm\+::m\+\_\+max\+Proximity\+Distance\+Coarse\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1FragmentRemovalAlgorithm_ab986edb0eb78666d940ffb7172ec9b4b}


Definition at line 88 of file Fragment\+Removal\+Algorithm.\+h.



Referenced by Find\+Cluster\+Fragments(), and Read\+Settings().

\index{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}!m\+\_\+max\+Proximity\+Distance\+Fine@{m\+\_\+max\+Proximity\+Distance\+Fine}}
\index{m\+\_\+max\+Proximity\+Distance\+Fine@{m\+\_\+max\+Proximity\+Distance\+Fine}!arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}}
\subsubsection[{m\+\_\+max\+Proximity\+Distance\+Fine}]{\setlength{\rightskip}{0pt plus 5cm}float arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm\+::m\+\_\+max\+Proximity\+Distance\+Fine\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1FragmentRemovalAlgorithm_ade3bf93807101c3683e37e0b96e043f7}


Definition at line 87 of file Fragment\+Removal\+Algorithm.\+h.



Referenced by Find\+Cluster\+Fragments(), and Read\+Settings().

\index{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}!m\+\_\+p\+Calo\+Hit\+Merging\+Tool@{m\+\_\+p\+Calo\+Hit\+Merging\+Tool}}
\index{m\+\_\+p\+Calo\+Hit\+Merging\+Tool@{m\+\_\+p\+Calo\+Hit\+Merging\+Tool}!arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm@{arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm}}
\subsubsection[{m\+\_\+p\+Calo\+Hit\+Merging\+Tool}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Calo\+Hit\+Merging\+Tool}$\ast$ arbor\+\_\+content\+::\+Fragment\+Removal\+Algorithm\+::m\+\_\+p\+Calo\+Hit\+Merging\+Tool\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1FragmentRemovalAlgorithm_a17be731f44d2ee59f926c26636497c67}


The calo hit merging tool. 



Definition at line 91 of file Fragment\+Removal\+Algorithm.\+h.



Referenced by Read\+Settings(), and Run().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
{\bf Fragment\+Removal\+Algorithm.\+h}\item 
{\bf Fragment\+Removal\+Algorithm.\+cc}\end{DoxyCompactItemize}
