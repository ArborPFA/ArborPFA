\section{arbor\+\_\+content\+:\+:Surrounding\+Hits\+Merging\+Algorithm Class Reference}
\label{classarbor__content_1_1SurroundingHitsMergingAlgorithm}\index{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm@{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm}}


\doxyref{Surrounding\+Hits\+Merging\+Algorithm}{p.}{classarbor__content_1_1SurroundingHitsMergingAlgorithm} class.  




{\ttfamily \#include $<$Surrounding\+Hits\+Merging\+Algorithm.\+h$>$}

Inheritance diagram for arbor\+\_\+content\+:\+:Surrounding\+Hits\+Merging\+Algorithm\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classarbor__content_1_1SurroundingHitsMergingAlgorithm}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class {\bf Factory}
\begin{DoxyCompactList}\small\item\em \doxyref{Factory}{p.}{classarbor__content_1_1SurroundingHitsMergingAlgorithm_1_1Factory} class for instantiating algorithm. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
pandora\+::\+Status\+Code {\bf Run} ()
\item 
pandora\+::\+Status\+Code {\bf Read\+Settings} (const pandora\+::\+Ti\+Xml\+Handle xml\+Handle)
\item 
pandora\+::\+Status\+Code {\bf Get\+Contents} (pandora\+::\+Calo\+Hit\+List \&calo\+Hit\+List, pandora\+::\+Cluster\+Vector \&cluster\+Vector) const 
\begin{DoxyCompactList}\small\item\em Get the pandora content to perform the algorithm. \end{DoxyCompactList}\item 
pandora\+::\+Status\+Code {\bf Get\+Available\+Calo\+Hit\+List} (const pandora\+::\+Calo\+Hit\+List $\ast$const p\+Calo\+Hit\+List, pandora\+::\+Calo\+Hit\+List \&available\+Calo\+Hit\+List) const 
\begin{DoxyCompactList}\small\item\em Get the list of available calo hits. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
bool {\bf m\+\_\+should\+Merge\+Isolated\+Hits}
\begin{DoxyCompactList}\small\item\em Whether to merge isolated hits in clusters. \end{DoxyCompactList}\item 
pandora\+::\+String\+Vector {\bf m\+\_\+additional\+Cluster\+List\+Names}
\begin{DoxyCompactList}\small\item\em Additional cluster list names to perform the merging. \end{DoxyCompactList}\item 
{\bf Calo\+Hit\+Merging\+Tool} $\ast$ {\bf m\+\_\+p\+Calo\+Hit\+Merging\+Tool}
\begin{DoxyCompactList}\small\item\em The calo hit merging tool. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
\doxyref{Surrounding\+Hits\+Merging\+Algorithm}{p.}{classarbor__content_1_1SurroundingHitsMergingAlgorithm} class. 

Definition at line 44 of file Surrounding\+Hits\+Merging\+Algorithm.\+h.



\subsection{Member Function Documentation}
\index{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm@{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm}!Get\+Available\+Calo\+Hit\+List@{Get\+Available\+Calo\+Hit\+List}}
\index{Get\+Available\+Calo\+Hit\+List@{Get\+Available\+Calo\+Hit\+List}!arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm@{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm}}
\subsubsection[{Get\+Available\+Calo\+Hit\+List}]{\setlength{\rightskip}{0pt plus 5cm}pandora\+::\+Status\+Code arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm\+::\+Get\+Available\+Calo\+Hit\+List (
\begin{DoxyParamCaption}
\item[{const pandora\+::\+Calo\+Hit\+List $\ast$const}]{p\+Calo\+Hit\+List, }
\item[{pandora\+::\+Calo\+Hit\+List \&}]{available\+Calo\+Hit\+List}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1SurroundingHitsMergingAlgorithm_a61788a5451c4d8361d22499a9f90756b}


Get the list of available calo hits. 


\begin{DoxyParams}{Parameters}
{\em p\+Calo\+Hit\+List} & the input calo hit list to extract available ones \\
\hline
{\em available\+Calo\+Hit\+List} & the list of available calo hits to receive \\
\hline
\end{DoxyParams}


Definition at line 52 of file Surrounding\+Hits\+Merging\+Algorithm.\+cc.



References m\+\_\+should\+Merge\+Isolated\+Hits.



Referenced by Get\+Contents().


\begin{DoxyCode}
53   \{
54     \textcolor{keywordflow}{for}(pandora::CaloHitList::const\_iterator iter = pCaloHitList->begin(), endIter = pCaloHitList->end() ;
55         endIter != iter ; ++iter)
56     \{
57       \textcolor{keyword}{const} pandora::CaloHit *\textcolor{keyword}{const} pCaloHit(*iter);
58 
59       \textcolor{keywordflow}{if}(!PandoraContentApi::IsAvailable(*\textcolor{keyword}{this}, pCaloHit))
60         \textcolor{keywordflow}{continue};
61 
62       \textcolor{keywordflow}{if}(!m_shouldMergeIsolatedHits && pCaloHit->IsIsolated())
63         \textcolor{keywordflow}{continue};
64 
65       availableCaloHitList.insert(pCaloHit);
66     \}
67 
68     \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
69   \}
\end{DoxyCode}
\index{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm@{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm}!Get\+Contents@{Get\+Contents}}
\index{Get\+Contents@{Get\+Contents}!arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm@{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm}}
\subsubsection[{Get\+Contents}]{\setlength{\rightskip}{0pt plus 5cm}pandora\+::\+Status\+Code arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm\+::\+Get\+Contents (
\begin{DoxyParamCaption}
\item[{pandora\+::\+Calo\+Hit\+List \&}]{calo\+Hit\+List, }
\item[{pandora\+::\+Cluster\+Vector \&}]{cluster\+Vector}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1SurroundingHitsMergingAlgorithm_a1b07ef2ab651cfcee5d69b7094c8d296}


Get the pandora content to perform the algorithm. 


\begin{DoxyParams}{Parameters}
{\em calo\+Hit\+List} & the calo hit list to receive \\
\hline
{\em cluster\+Vector} & the cluster list to receive \\
\hline
\end{DoxyParams}


Definition at line 73 of file Surrounding\+Hits\+Merging\+Algorithm.\+cc.



References Get\+Available\+Calo\+Hit\+List(), and m\+\_\+additional\+Cluster\+List\+Names.



Referenced by Run().


\begin{DoxyCode}
74   \{
75     \textcolor{comment}{// get available calo hit list}
76     \textcolor{keyword}{const} pandora::CaloHitList *pCaloHitList = NULL;
77     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, PandoraContentApi::GetCurrentList(*\textcolor{keyword}{this}, 
      pCaloHitList));
78     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, this->
      GetAvailableCaloHitList(pCaloHitList, caloHitList));
79 
80     \textcolor{comment}{// get cluster list}
81     \textcolor{keyword}{const} pandora::ClusterList *pClusterList = NULL;
82     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, PandoraContentApi::GetCurrentList(*\textcolor{keyword}{this}, 
      pClusterList));
83 
84     pandora::ClusterList clusterList(pClusterList->begin(), pClusterList->end());
85 
86     \textcolor{keywordflow}{for}(pandora::StringVector::const\_iterator iter = 
      m_additionalClusterListNames.begin(), endIter = m_additionalClusterListNames.end() ;
87         endIter != iter ; ++iter)
88     \{
89       \textcolor{keyword}{const} pandora::ClusterList *pAdditionalClusterList = NULL;
90 
91       \textcolor{keywordflow}{if}(pandora::STATUS\_CODE\_SUCCESS != PandoraContentApi::GetList(*\textcolor{keyword}{this}, *iter, pAdditionalClusterList))
92       \{
93         std::cout << \textcolor{stringliteral}{"SurroundingHitsMergingAlgorithm: additional cluster list '"} << *iter << \textcolor{stringliteral}{"' is not
       available"} << std::endl;
94         \textcolor{keywordflow}{continue};
95       \}
96 
97       clusterList.insert(pAdditionalClusterList->begin(), pAdditionalClusterList->end());
98     \}
99 
100     clusterVector.insert(clusterVector.end(), clusterList.begin(), clusterList.end());
101 
102     \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
103   \}
\end{DoxyCode}
\index{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm@{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm}!Read\+Settings@{Read\+Settings}}
\index{Read\+Settings@{Read\+Settings}!arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm@{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm}}
\subsubsection[{Read\+Settings}]{\setlength{\rightskip}{0pt plus 5cm}pandora\+::\+Status\+Code arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm\+::\+Read\+Settings (
\begin{DoxyParamCaption}
\item[{const pandora\+::\+Ti\+Xml\+Handle}]{xml\+Handle}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1SurroundingHitsMergingAlgorithm_a78b2e765e0c3d5d339734c65fc43ac9d}


Definition at line 107 of file Surrounding\+Hits\+Merging\+Algorithm.\+cc.



References m\+\_\+additional\+Cluster\+List\+Names, m\+\_\+p\+Calo\+Hit\+Merging\+Tool, and m\+\_\+should\+Merge\+Isolated\+Hits.


\begin{DoxyCode}
108   \{
109     m_shouldMergeIsolatedHits = \textcolor{keyword}{false};
110     PANDORA\_RETURN\_RESULT\_IF\_AND\_IF(pandora::STATUS\_CODE\_SUCCESS, pandora::STATUS\_CODE\_NOT\_FOUND, !=, 
      pandora::XmlHelper::ReadValue(xmlHandle,
111         \textcolor{stringliteral}{"ShouldMergeIsolatedHits"}, m_shouldMergeIsolatedHits));
112 
113     PANDORA\_RETURN\_RESULT\_IF\_AND\_IF(pandora::STATUS\_CODE\_SUCCESS, pandora::STATUS\_CODE\_NOT\_FOUND, !=, 
      pandora::XmlHelper::ReadVectorOfValues(xmlHandle,
114         \textcolor{stringliteral}{"AdditionalClusterListNames"}, m_additionalClusterListNames));
115 
116     m_pCaloHitMergingTool = NULL;
117     pandora::AlgorithmTool *pAlgorithmTool = NULL;
118     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, pandora::XmlHelper::ProcessAlgorithmTool(*\textcolor{keyword}{
      this}, xmlHandle,
119         \textcolor{stringliteral}{"CaloHitMerging"}, pAlgorithmTool));
120 
121     m_pCaloHitMergingTool = \textcolor{keyword}{dynamic\_cast<}CaloHitMergingTool*\textcolor{keyword}{>}(pAlgorithmTool);
122 
123     \textcolor{keywordflow}{if}(NULL == m_pCaloHitMergingTool)
124       \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_INVALID\_PARAMETER;
125 
126     \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
127   \}
\end{DoxyCode}
\index{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm@{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm}!Run@{Run}}
\index{Run@{Run}!arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm@{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm}}
\subsubsection[{Run}]{\setlength{\rightskip}{0pt plus 5cm}pandora\+::\+Status\+Code arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm\+::\+Run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1SurroundingHitsMergingAlgorithm_ab1bb20b10e74a56e2d4833a9018c8ecb}


Definition at line 40 of file Surrounding\+Hits\+Merging\+Algorithm.\+cc.



References Get\+Contents(), m\+\_\+p\+Calo\+Hit\+Merging\+Tool, and arbor\+\_\+content\+::\+Calo\+Hit\+Merging\+Tool\+::\+Merge\+Calo\+Hits().


\begin{DoxyCode}
41   \{
42     pandora::CaloHitList caloHitList; pandora::ClusterVector clusterVector;
43     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, this->GetContents(caloHitList, clusterVector
      ));
44 
45     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, 
      m_pCaloHitMergingTool->MergeCaloHits(*\textcolor{keyword}{this}, caloHitList, clusterVector));
46 
47     \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
48   \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm@{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm}!m\+\_\+additional\+Cluster\+List\+Names@{m\+\_\+additional\+Cluster\+List\+Names}}
\index{m\+\_\+additional\+Cluster\+List\+Names@{m\+\_\+additional\+Cluster\+List\+Names}!arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm@{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm}}
\subsubsection[{m\+\_\+additional\+Cluster\+List\+Names}]{\setlength{\rightskip}{0pt plus 5cm}pandora\+::\+String\+Vector arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm\+::m\+\_\+additional\+Cluster\+List\+Names\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1SurroundingHitsMergingAlgorithm_a0752ef20d7d8e966f84b14445a3f0809}


Additional cluster list names to perform the merging. 



Definition at line 79 of file Surrounding\+Hits\+Merging\+Algorithm.\+h.



Referenced by Get\+Contents(), and Read\+Settings().

\index{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm@{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm}!m\+\_\+p\+Calo\+Hit\+Merging\+Tool@{m\+\_\+p\+Calo\+Hit\+Merging\+Tool}}
\index{m\+\_\+p\+Calo\+Hit\+Merging\+Tool@{m\+\_\+p\+Calo\+Hit\+Merging\+Tool}!arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm@{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm}}
\subsubsection[{m\+\_\+p\+Calo\+Hit\+Merging\+Tool}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Calo\+Hit\+Merging\+Tool}$\ast$ arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm\+::m\+\_\+p\+Calo\+Hit\+Merging\+Tool\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1SurroundingHitsMergingAlgorithm_a3363ebe09b39e622b338ea645f8827d9}


The calo hit merging tool. 



Definition at line 80 of file Surrounding\+Hits\+Merging\+Algorithm.\+h.



Referenced by Read\+Settings(), and Run().

\index{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm@{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm}!m\+\_\+should\+Merge\+Isolated\+Hits@{m\+\_\+should\+Merge\+Isolated\+Hits}}
\index{m\+\_\+should\+Merge\+Isolated\+Hits@{m\+\_\+should\+Merge\+Isolated\+Hits}!arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm@{arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm}}
\subsubsection[{m\+\_\+should\+Merge\+Isolated\+Hits}]{\setlength{\rightskip}{0pt plus 5cm}bool arbor\+\_\+content\+::\+Surrounding\+Hits\+Merging\+Algorithm\+::m\+\_\+should\+Merge\+Isolated\+Hits\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1SurroundingHitsMergingAlgorithm_a3f3a87fa148702a08dfd735c7d6c120b}


Whether to merge isolated hits in clusters. 



Definition at line 78 of file Surrounding\+Hits\+Merging\+Algorithm.\+h.



Referenced by Get\+Available\+Calo\+Hit\+List(), and Read\+Settings().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
{\bf Surrounding\+Hits\+Merging\+Algorithm.\+h}\item 
{\bf Surrounding\+Hits\+Merging\+Algorithm.\+cc}\end{DoxyCompactItemize}
