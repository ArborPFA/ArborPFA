\section{arbor\+\_\+content\+:\+:Arbor\+Clustering\+Algorithm Class Reference}
\label{classarbor__content_1_1ArborClusteringAlgorithm}\index{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}}


\doxyref{Arbor\+Clustering\+Algorithm}{p.}{classarbor__content_1_1ArborClusteringAlgorithm} class.  




{\ttfamily \#include $<$Arbor\+Clustering\+Algorithm.\+h$>$}

Inheritance diagram for arbor\+\_\+content\+:\+:Arbor\+Clustering\+Algorithm\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classarbor__content_1_1ArborClusteringAlgorithm}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class {\bf Factory}
\begin{DoxyCompactList}\small\item\em \doxyref{Factory}{p.}{classarbor__content_1_1ArborClusteringAlgorithm_1_1Factory} class for instantiating algorithm. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
pandora\+::\+Status\+Code {\bf Run} ()
\item 
pandora\+::\+Status\+Code {\bf Read\+Settings} (const pandora\+::\+Ti\+Xml\+Handle xml\+Handle)
\item 
pandora\+::\+Status\+Code {\bf Split\+Calo\+Hit\+List} (const pandora\+::\+Calo\+Hit\+List $\ast$const p\+Calo\+Hit\+List, pandora\+::\+Calo\+Hit\+List \&ecal\+Calo\+Hit\+List, pandora\+::\+Calo\+Hit\+List \&hcal\+Calo\+Hit\+List, pandora\+::\+Calo\+Hit\+List \&muon\+Calo\+Hit\+List) const 
\begin{DoxyCompactList}\small\item\em Split the input calo hit list into three lists for ecal, hcal and muon. \end{DoxyCompactList}\item 
pandora\+::\+Status\+Code {\bf Connect\+Calo\+Hits} (const pandora\+::\+Calo\+Hit\+List $\ast$const p\+Calo\+Hit\+List, const pandora\+::\+Calo\+Hit\+List \&ecal\+Calo\+Hit\+List, const pandora\+::\+Calo\+Hit\+List \&hcal\+Calo\+Hit\+List, const pandora\+::\+Calo\+Hit\+List \&muon\+Calo\+Hit\+List) const 
\begin{DoxyCompactList}\small\item\em Connect calo hits using targeted connection algorithm tools for global, ecal, hcal and muon calo hit list. \end{DoxyCompactList}\item 
pandora\+::\+Status\+Code {\bf Connect\+Calo\+Hits} (const pandora\+::\+Calo\+Hit\+List \&calo\+Hit\+List, const {\bf Connector\+Algorithm\+Tool\+Vector} \&tool\+Vector) const 
\begin{DoxyCompactList}\small\item\em Process calo hit list connection using the algorithm tool list. \end{DoxyCompactList}\item 
pandora\+::\+Status\+Code {\bf Create\+Clusters} () const 
\begin{DoxyCompactList}\small\item\em Create clusters from the previously connected calo hits. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
{\bf Connector\+Algorithm\+Tool\+Vector} {\bf m\+\_\+ecal\+Tool\+List}
\begin{DoxyCompactList}\small\item\em The ecal algorithm tool list. \end{DoxyCompactList}\item 
{\bf Connector\+Algorithm\+Tool\+Vector} {\bf m\+\_\+hcal\+Tool\+List}
\begin{DoxyCompactList}\small\item\em The hcal algorithm tool list. \end{DoxyCompactList}\item 
{\bf Connector\+Algorithm\+Tool\+Vector} {\bf m\+\_\+muon\+Tool\+List}
\begin{DoxyCompactList}\small\item\em The muon algorithm tool list. \end{DoxyCompactList}\item 
{\bf Connector\+Algorithm\+Tool\+Vector} {\bf m\+\_\+additional\+Tool\+List}
\begin{DoxyCompactList}\small\item\em The addtional algorithm tool list. \end{DoxyCompactList}\item 
bool {\bf m\+\_\+allow\+Single\+Hit\+Clusters}
\begin{DoxyCompactList}\small\item\em Whether to allow single calo hit clusters. \end{DoxyCompactList}\item 
bool {\bf m\+\_\+use\+Multithread}
\begin{DoxyCompactList}\small\item\em Whether to use multithreading with ecal-\/hcal-\/muon tools. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
\doxyref{Arbor\+Clustering\+Algorithm}{p.}{classarbor__content_1_1ArborClusteringAlgorithm} class. 

Definition at line 43 of file Arbor\+Clustering\+Algorithm.\+h.



\subsection{Member Function Documentation}
\index{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}!Connect\+Calo\+Hits@{Connect\+Calo\+Hits}}
\index{Connect\+Calo\+Hits@{Connect\+Calo\+Hits}!arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}}
\subsubsection[{Connect\+Calo\+Hits}]{\setlength{\rightskip}{0pt plus 5cm}pandora\+::\+Status\+Code arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm\+::\+Connect\+Calo\+Hits (
\begin{DoxyParamCaption}
\item[{const pandora\+::\+Calo\+Hit\+List $\ast$const}]{p\+Calo\+Hit\+List, }
\item[{const pandora\+::\+Calo\+Hit\+List \&}]{ecal\+Calo\+Hit\+List, }
\item[{const pandora\+::\+Calo\+Hit\+List \&}]{hcal\+Calo\+Hit\+List, }
\item[{const pandora\+::\+Calo\+Hit\+List \&}]{muon\+Calo\+Hit\+List}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1ArborClusteringAlgorithm_a928e54fd8f79bafc6db5144381a36790}


Connect calo hits using targeted connection algorithm tools for global, ecal, hcal and muon calo hit list. 


\begin{DoxyParams}{Parameters}
{\em p\+Calo\+Hit\+List} & the global calo hit list to process \\
\hline
{\em ecal\+Calo\+Hit\+List} & the ecal calo hit list to process \\
\hline
{\em hcal\+Calo\+Hit\+List} & the hcal calo hit list to process \\
\hline
{\em muon\+Calo\+Hit\+List} & the muon calo hit list to process \\
\hline
\end{DoxyParams}


Definition at line 84 of file Arbor\+Clustering\+Algorithm.\+cc.



References m\+\_\+additional\+Tool\+List, m\+\_\+ecal\+Tool\+List, m\+\_\+hcal\+Tool\+List, m\+\_\+muon\+Tool\+List, and m\+\_\+use\+Multithread.



Referenced by Run().


\begin{DoxyCode}
86   \{
87     \textcolor{keywordflow}{if}(m_useMultithread)
88     \{
89 \textcolor{preprocessor}{#ifdef ARBOR\_PARALLEL}
90       \textcolor{comment}{// run in parallel the three detector region in different OpenMP sections}
91       \textcolor{comment}{// returns in case one the thread returned a bad status code}
92       pandora::StatusCode globalStatusCode = pandora::STATUS\_CODE\_SUCCESS;
93 
94 \textcolor{preprocessor}{#pragma omp parallel sections}
95       \{
96 \textcolor{preprocessor}{#pragma omp section}
97         \{
98           \textcolor{keyword}{const} pandora::StatusCode statusCode = this->ConnectCaloHits(ecalCaloHitList, 
      m_ecalToolList);
99 
100 \textcolor{preprocessor}{#pragma omp critical}
101           \{
102             \textcolor{keywordflow}{if}(globalStatusCode == pandora::STATUS\_CODE\_SUCCESS)
103               globalStatusCode = statusCode;
104           \}
105         \}
106 \textcolor{preprocessor}{#pragma omp section}
107         \{
108           \textcolor{keyword}{const} pandora::StatusCode statusCode = this->ConnectCaloHits(hcalCaloHitList, 
      m_hcalToolList);
109 
110 \textcolor{preprocessor}{#pragma omp critical}
111           \{
112             \textcolor{keywordflow}{if}(globalStatusCode == pandora::STATUS\_CODE\_SUCCESS)
113               globalStatusCode = statusCode;
114           \}
115         \}
116 \textcolor{preprocessor}{#pragma omp section}
117         \{
118           \textcolor{keyword}{const} pandora::StatusCode statusCode = this->ConnectCaloHits(muonCaloHitList, 
      m_muonToolList);
119 
120 \textcolor{preprocessor}{#pragma omp critical}
121           \{
122             \textcolor{keywordflow}{if}(globalStatusCode == pandora::STATUS\_CODE\_SUCCESS)
123               globalStatusCode = statusCode;
124           \}
125         \}
126       \}
127 
128       \textcolor{keywordflow}{if}(globalStatusCode != pandora::STATUS\_CODE\_SUCCESS)
129         \textcolor{keywordflow}{return} globalStatusCode;
130 \textcolor{preprocessor}{#endif}
131     \}
132     \textcolor{keywordflow}{else}
133     \{
134       \textcolor{comment}{// single core algorithm}
135       PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, this->
      ConnectCaloHits(ecalCaloHitList, m_ecalToolList));
136       PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, this->
      ConnectCaloHits(hcalCaloHitList, m_hcalToolList));
137       PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, this->
      ConnectCaloHits(muonCaloHitList, m_muonToolList));
138     \}
139 
140     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, this->
      ConnectCaloHits(*pCaloHitList, m_additionalToolList));
141 
142     \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
143   \}
\end{DoxyCode}
\index{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}!Connect\+Calo\+Hits@{Connect\+Calo\+Hits}}
\index{Connect\+Calo\+Hits@{Connect\+Calo\+Hits}!arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}}
\subsubsection[{Connect\+Calo\+Hits}]{\setlength{\rightskip}{0pt plus 5cm}pandora\+::\+Status\+Code arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm\+::\+Connect\+Calo\+Hits (
\begin{DoxyParamCaption}
\item[{const pandora\+::\+Calo\+Hit\+List \&}]{calo\+Hit\+List, }
\item[{const {\bf Connector\+Algorithm\+Tool\+Vector} \&}]{tool\+Vector}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1ArborClusteringAlgorithm_ac3c8fdb08977b0ec17761c2293ffd8ea}


Process calo hit list connection using the algorithm tool list. 


\begin{DoxyParams}{Parameters}
{\em calo\+Hit\+List} & the input calo hit list to connect \\
\hline
{\em tool\+Vector} & the list of algorithm tool used for connecting calo hits \\
\hline
\end{DoxyParams}


Definition at line 147 of file Arbor\+Clustering\+Algorithm.\+cc.



References arbor\+\_\+content\+::\+Connector\+Algorithm\+Tool\+::\+Process().


\begin{DoxyCode}
148   \{
149     \textcolor{keywordflow}{for}(ConnectorAlgorithmToolVector::const\_iterator iter = toolVector.begin(), endIter = toolVector.end() 
      ;
150         endIter != iter ; ++iter)
151     \{
152       ConnectorAlgorithmTool *pTool = *iter;
153       PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, pTool->Process(*\textcolor{keyword}{this}, &caloHitList));
154     \}
155 
156     \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
157   \}
\end{DoxyCode}
\index{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}!Create\+Clusters@{Create\+Clusters}}
\index{Create\+Clusters@{Create\+Clusters}!arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}}
\subsubsection[{Create\+Clusters}]{\setlength{\rightskip}{0pt plus 5cm}pandora\+::\+Status\+Code arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm\+::\+Create\+Clusters (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1ArborClusteringAlgorithm_a315b3ce0bd9676eca10f787cc470df03}


Create clusters from the previously connected calo hits. 



Definition at line 161 of file Arbor\+Clustering\+Algorithm.\+cc.



References arbor\+\_\+content\+::\+Calo\+Hit\+Helper\+::\+Build\+Calo\+Hit\+List(), arbor\+\_\+content\+::\+Calo\+Hit\+Helper\+::\+Extract\+Current\+Seed\+Calo\+Hit\+List(), arbor\+\_\+content\+::\+F\+O\+R\+W\+A\+R\+D\+\_\+\+D\+I\+R\+E\+C\+T\+I\+O\+N, m\+\_\+additional\+Tool\+List, m\+\_\+allow\+Single\+Hit\+Clusters, m\+\_\+ecal\+Tool\+List, m\+\_\+hcal\+Tool\+List, and m\+\_\+muon\+Tool\+List.



Referenced by Run().


\begin{DoxyCode}
162   \{
163     \textcolor{keywordflow}{if}( m_ecalToolList.empty() && m_hcalToolList.empty() && m_muonToolList.empty() && 
      m_additionalToolList.empty() )
164       \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
165 
166     \textcolor{comment}{// Find seeds and build clusters from them looking for forward connected hits in the tree structure}
167     pandora::CaloHitList seedCaloHitList;
168     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, 
      CaloHitHelper::ExtractCurrentSeedCaloHitList(*\textcolor{keyword}{this}, seedCaloHitList, !
      m_allowSingleHitClusters));
169 
170     \textcolor{keywordflow}{for}(pandora::CaloHitList::iterator iter = seedCaloHitList.begin(), endIter = seedCaloHitList.end() ;
171         endIter != iter ; ++iter)
172     \{
173       \textcolor{keyword}{const} arbor_content::CaloHit *\textcolor{keyword}{const} pCaloHit = \textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }
      arbor_content::CaloHit *const\textcolor{keyword}{>}(*iter);
174 
175       \textcolor{comment}{// wrong framework baby !}
176       \textcolor{keywordflow}{if}(NULL == pCaloHit)
177         \textcolor{keywordflow}{continue};
178 
179       \textcolor{keywordflow}{if}( ! PandoraContentApi::IsAvailable<pandora::CaloHit>(*\textcolor{keyword}{this}, pCaloHit) )
180         \textcolor{keywordflow}{continue};
181 
182       pandora::CaloHitList clusterCaloHitList;
183       clusterCaloHitList.insert(pCaloHit);
184 
185       \textcolor{comment}{// get the whole tree calo hit list}
186       PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, 
      CaloHitHelper::BuildCaloHitList(pCaloHit, FORWARD_DIRECTION, clusterCaloHitList));
187 
188       \textcolor{comment}{// create a cluster with this list}
189       \textcolor{keyword}{const} pandora::Cluster *pCluster = NULL;
190       PandoraContentApi::ClusterParameters clusterParameters;
191       clusterParameters.m\_caloHitList = clusterCaloHitList;
192 
193       PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, PandoraContentApi::Cluster::Create(*\textcolor{keyword}{this}, 
      clusterParameters, pCluster));
194     \}
195 
196     \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
197   \}
\end{DoxyCode}
\index{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}!Read\+Settings@{Read\+Settings}}
\index{Read\+Settings@{Read\+Settings}!arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}}
\subsubsection[{Read\+Settings}]{\setlength{\rightskip}{0pt plus 5cm}pandora\+::\+Status\+Code arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm\+::\+Read\+Settings (
\begin{DoxyParamCaption}
\item[{const pandora\+::\+Ti\+Xml\+Handle}]{xml\+Handle}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1ArborClusteringAlgorithm_a9159243df1450c7c324bb1ebd2d88f24}


Definition at line 201 of file Arbor\+Clustering\+Algorithm.\+cc.



References m\+\_\+additional\+Tool\+List, m\+\_\+allow\+Single\+Hit\+Clusters, m\+\_\+ecal\+Tool\+List, m\+\_\+hcal\+Tool\+List, m\+\_\+muon\+Tool\+List, and m\+\_\+use\+Multithread.


\begin{DoxyCode}
202   \{
203     pandora::AlgorithmToolList algorithmToolList;
204     PANDORA\_RETURN\_RESULT\_IF\_AND\_IF(pandora::STATUS\_CODE\_SUCCESS, pandora::STATUS\_CODE\_NOT\_FOUND, !=, 
      pandora::XmlHelper::ProcessAlgorithmToolList(*\textcolor{keyword}{this}, xmlHandle,
205         \textcolor{stringliteral}{"ECalConnectionTools"}, algorithmToolList));
206 
207     \textcolor{keywordflow}{for}(pandora::AlgorithmToolList::const\_iterator iter = algorithmToolList.begin(), endIter = 
      algorithmToolList.end() ;
208         endIter != iter ; ++iter)
209     \{
210       ConnectorAlgorithmTool *pTool = \textcolor{keyword}{dynamic\_cast<}ConnectorAlgorithmTool*\textcolor{keyword}{>}(*iter);
211 
212       \textcolor{keywordflow}{if}(NULL == pTool)
213         \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_INVALID\_PARAMETER;
214 
215       m_ecalToolList.push\_back(pTool);
216     \}
217 
218     algorithmToolList.clear();
219 
220     PANDORA\_RETURN\_RESULT\_IF\_AND\_IF(pandora::STATUS\_CODE\_SUCCESS, pandora::STATUS\_CODE\_NOT\_FOUND, !=, 
      pandora::XmlHelper::ProcessAlgorithmToolList(*\textcolor{keyword}{this}, xmlHandle,
221         \textcolor{stringliteral}{"HCalConnectionTools"}, algorithmToolList));
222 
223     \textcolor{keywordflow}{for}(pandora::AlgorithmToolList::const\_iterator iter = algorithmToolList.begin(), endIter = 
      algorithmToolList.end() ;
224         endIter != iter ; ++iter)
225     \{
226       ConnectorAlgorithmTool *pTool = \textcolor{keyword}{dynamic\_cast<}ConnectorAlgorithmTool*\textcolor{keyword}{>}(*iter);
227 
228       \textcolor{keywordflow}{if}(NULL == pTool)
229         \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_INVALID\_PARAMETER;
230 
231       m_hcalToolList.push\_back(pTool);
232     \}
233 
234     algorithmToolList.clear();
235 
236     PANDORA\_RETURN\_RESULT\_IF\_AND\_IF(pandora::STATUS\_CODE\_SUCCESS, pandora::STATUS\_CODE\_NOT\_FOUND, !=, 
      pandora::XmlHelper::ProcessAlgorithmToolList(*\textcolor{keyword}{this}, xmlHandle,
237         \textcolor{stringliteral}{"MuonConnectionTools"}, algorithmToolList));
238 
239     \textcolor{keywordflow}{for}(pandora::AlgorithmToolList::const\_iterator iter = algorithmToolList.begin(), endIter = 
      algorithmToolList.end() ;
240         endIter != iter ; ++iter)
241     \{
242       ConnectorAlgorithmTool *pTool = \textcolor{keyword}{dynamic\_cast<}ConnectorAlgorithmTool*\textcolor{keyword}{>}(*iter);
243 
244       \textcolor{keywordflow}{if}(NULL == pTool)
245         \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_INVALID\_PARAMETER;
246 
247       m_muonToolList.push\_back(pTool);
248     \}
249 
250     algorithmToolList.clear();
251 
252     PANDORA\_RETURN\_RESULT\_IF\_AND\_IF(pandora::STATUS\_CODE\_SUCCESS, pandora::STATUS\_CODE\_NOT\_FOUND, !=, 
      pandora::XmlHelper::ProcessAlgorithmToolList(*\textcolor{keyword}{this}, xmlHandle,
253         \textcolor{stringliteral}{"AdditionalConnectionTools"}, algorithmToolList));
254 
255     \textcolor{keywordflow}{for}(pandora::AlgorithmToolList::const\_iterator iter = algorithmToolList.begin(), endIter = 
      algorithmToolList.end() ;
256         endIter != iter ; ++iter)
257     \{
258       ConnectorAlgorithmTool *pTool = \textcolor{keyword}{dynamic\_cast<}ConnectorAlgorithmTool*\textcolor{keyword}{>}(*iter);
259 
260       \textcolor{keywordflow}{if}(NULL == pTool)
261         \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_INVALID\_PARAMETER;
262 
263       m_additionalToolList.push\_back(pTool);
264     \}
265 
266     algorithmToolList.clear();
267 
268     m_allowSingleHitClusters = \textcolor{keyword}{false};
269     PANDORA\_RETURN\_RESULT\_IF\_AND\_IF(pandora::STATUS\_CODE\_SUCCESS, pandora::STATUS\_CODE\_NOT\_FOUND, !=, 
      pandora::XmlHelper::ReadValue(xmlHandle,
270         \textcolor{stringliteral}{"AllowSingleHitClusters"}, m_allowSingleHitClusters));
271 
272 \textcolor{preprocessor}{#ifdef ARBOR\_PARALLEL}
273     m_useMultithread = \textcolor{keyword}{true};
274     PANDORA\_RETURN\_RESULT\_IF\_AND\_IF(pandora::STATUS\_CODE\_SUCCESS, pandora::STATUS\_CODE\_NOT\_FOUND, !=, 
      pandora::XmlHelper::ReadValue(xmlHandle,
275         \textcolor{stringliteral}{"UseMultithread"}, m_useMultithread));
276 \textcolor{preprocessor}{#else}
277     m_useMultithread = \textcolor{keyword}{false};
278 \textcolor{preprocessor}{#endif}
279 
280     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} nNonEmptyToolList = 0;
281 
282     nNonEmptyToolList += m_ecalToolList.empty() ? 0 : 1;
283     nNonEmptyToolList += m_hcalToolList.empty() ? 0 : 1;
284     nNonEmptyToolList += m_muonToolList.empty() ? 0 : 1;
285 
286     \textcolor{keywordflow}{if}(nNonEmptyToolList <= 1 && m_useMultithread)
287     \{
288       std::cout << \textcolor{stringliteral}{"Multi-threading disabled"} << std::endl;
289       m_useMultithread = \textcolor{keyword}{false};
290     \}
291 
292     \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
293   \}
\end{DoxyCode}
\index{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}!Run@{Run}}
\index{Run@{Run}!arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}}
\subsubsection[{Run}]{\setlength{\rightskip}{0pt plus 5cm}pandora\+::\+Status\+Code arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm\+::\+Run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1ArborClusteringAlgorithm_aac38b11af050b43da405a23a9b13a60e}


Definition at line 39 of file Arbor\+Clustering\+Algorithm.\+cc.



References Connect\+Calo\+Hits(), Create\+Clusters(), and Split\+Calo\+Hit\+List().


\begin{DoxyCode}
40   \{
41     \textcolor{keyword}{const} pandora::CaloHitList *pCaloHitList = NULL;
42     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, PandoraContentApi::GetCurrentList(*\textcolor{keyword}{this}, 
      pCaloHitList));
43 
44     \textcolor{keywordflow}{if}(pCaloHitList->empty())
45       \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
46 
47     pandora::CaloHitList ecalCaloHitList, hcalCaloHitList, muonCaloHitList;
48     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, this->
      SplitCaloHitList(pCaloHitList, ecalCaloHitList, hcalCaloHitList, muonCaloHitList));
49     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, this->
      ConnectCaloHits(pCaloHitList, ecalCaloHitList, hcalCaloHitList, muonCaloHitList));
50     PANDORA\_RETURN\_RESULT\_IF(pandora::STATUS\_CODE\_SUCCESS, !=, this->
      CreateClusters());
51 
52     \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
53   \}
\end{DoxyCode}
\index{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}!Split\+Calo\+Hit\+List@{Split\+Calo\+Hit\+List}}
\index{Split\+Calo\+Hit\+List@{Split\+Calo\+Hit\+List}!arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}}
\subsubsection[{Split\+Calo\+Hit\+List}]{\setlength{\rightskip}{0pt plus 5cm}pandora\+::\+Status\+Code arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm\+::\+Split\+Calo\+Hit\+List (
\begin{DoxyParamCaption}
\item[{const pandora\+::\+Calo\+Hit\+List $\ast$const}]{p\+Calo\+Hit\+List, }
\item[{pandora\+::\+Calo\+Hit\+List \&}]{ecal\+Calo\+Hit\+List, }
\item[{pandora\+::\+Calo\+Hit\+List \&}]{hcal\+Calo\+Hit\+List, }
\item[{pandora\+::\+Calo\+Hit\+List \&}]{muon\+Calo\+Hit\+List}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1ArborClusteringAlgorithm_aa9c87383374198ddac2b4fb038f76037}


Split the input calo hit list into three lists for ecal, hcal and muon. 


\begin{DoxyParams}{Parameters}
{\em p\+Calo\+Hit\+List} & the input calo hit list to split \\
\hline
{\em ecal\+Calo\+Hit\+List} & the ecal calo hit list to receive \\
\hline
{\em hcal\+Calo\+Hit\+List} & the hcal calo hit list to receive \\
\hline
{\em muon\+Calo\+Hit\+List} & the muon calo hit list to receive \\
\hline
\end{DoxyParams}


Definition at line 57 of file Arbor\+Clustering\+Algorithm.\+cc.



References m\+\_\+ecal\+Tool\+List, m\+\_\+hcal\+Tool\+List, and m\+\_\+muon\+Tool\+List.



Referenced by Run().


\begin{DoxyCode}
59   \{
60     \textcolor{keywordflow}{if}( m_ecalToolList.empty() && m_hcalToolList.empty() && m_muonToolList.empty() )
61       \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
62 
63     \textcolor{keywordflow}{for}(pandora::CaloHitList::const\_iterator iter = pCaloHitList->begin(), endIter = pCaloHitList->end() ;
64         endIter !=iter ; ++iter)
65     \{
66       \textcolor{keyword}{const} pandora::CaloHit *\textcolor{keyword}{const} pCaloHit= *iter;
67 
68       \textcolor{keywordflow}{if}(!PandoraContentApi::IsAvailable(*\textcolor{keyword}{this}, pCaloHit))
69         \textcolor{keywordflow}{continue};
70 
71       \textcolor{keywordflow}{if}(pCaloHit->GetHitType() == pandora::ECAL)
72         ecalCaloHitList.insert(pCaloHit);
73       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(pCaloHit->GetHitType() == pandora::HCAL)
74         hcalCaloHitList.insert(pCaloHit);
75       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(pCaloHit->GetHitType() == pandora::MUON)
76         muonCaloHitList.insert(pCaloHit);
77     \}
78 
79     \textcolor{keywordflow}{return} pandora::STATUS\_CODE\_SUCCESS;
80   \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}!m\+\_\+additional\+Tool\+List@{m\+\_\+additional\+Tool\+List}}
\index{m\+\_\+additional\+Tool\+List@{m\+\_\+additional\+Tool\+List}!arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}}
\subsubsection[{m\+\_\+additional\+Tool\+List}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Connector\+Algorithm\+Tool\+Vector} arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm\+::m\+\_\+additional\+Tool\+List\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1ArborClusteringAlgorithm_ad5cf002a9fd92029fb1dffb175dede91}


The addtional algorithm tool list. 



Definition at line 98 of file Arbor\+Clustering\+Algorithm.\+h.



Referenced by Connect\+Calo\+Hits(), Create\+Clusters(), and Read\+Settings().

\index{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}!m\+\_\+allow\+Single\+Hit\+Clusters@{m\+\_\+allow\+Single\+Hit\+Clusters}}
\index{m\+\_\+allow\+Single\+Hit\+Clusters@{m\+\_\+allow\+Single\+Hit\+Clusters}!arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}}
\subsubsection[{m\+\_\+allow\+Single\+Hit\+Clusters}]{\setlength{\rightskip}{0pt plus 5cm}bool arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm\+::m\+\_\+allow\+Single\+Hit\+Clusters\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1ArborClusteringAlgorithm_a2ad21ca66f8606003d67c4a8d0a2cadf}


Whether to allow single calo hit clusters. 



Definition at line 99 of file Arbor\+Clustering\+Algorithm.\+h.



Referenced by Create\+Clusters(), and Read\+Settings().

\index{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}!m\+\_\+ecal\+Tool\+List@{m\+\_\+ecal\+Tool\+List}}
\index{m\+\_\+ecal\+Tool\+List@{m\+\_\+ecal\+Tool\+List}!arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}}
\subsubsection[{m\+\_\+ecal\+Tool\+List}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Connector\+Algorithm\+Tool\+Vector} arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm\+::m\+\_\+ecal\+Tool\+List\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1ArborClusteringAlgorithm_ae0060c8058ba07c2ec5e3426ddb42c5f}


The ecal algorithm tool list. 



Definition at line 95 of file Arbor\+Clustering\+Algorithm.\+h.



Referenced by Connect\+Calo\+Hits(), Create\+Clusters(), Read\+Settings(), and Split\+Calo\+Hit\+List().

\index{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}!m\+\_\+hcal\+Tool\+List@{m\+\_\+hcal\+Tool\+List}}
\index{m\+\_\+hcal\+Tool\+List@{m\+\_\+hcal\+Tool\+List}!arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}}
\subsubsection[{m\+\_\+hcal\+Tool\+List}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Connector\+Algorithm\+Tool\+Vector} arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm\+::m\+\_\+hcal\+Tool\+List\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1ArborClusteringAlgorithm_a9ddfc94ec1a4a42b47e627fa629e8b5a}


The hcal algorithm tool list. 



Definition at line 96 of file Arbor\+Clustering\+Algorithm.\+h.



Referenced by Connect\+Calo\+Hits(), Create\+Clusters(), Read\+Settings(), and Split\+Calo\+Hit\+List().

\index{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}!m\+\_\+muon\+Tool\+List@{m\+\_\+muon\+Tool\+List}}
\index{m\+\_\+muon\+Tool\+List@{m\+\_\+muon\+Tool\+List}!arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}}
\subsubsection[{m\+\_\+muon\+Tool\+List}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Connector\+Algorithm\+Tool\+Vector} arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm\+::m\+\_\+muon\+Tool\+List\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1ArborClusteringAlgorithm_aa67975515b05dd86e84d81d429917baa}


The muon algorithm tool list. 



Definition at line 97 of file Arbor\+Clustering\+Algorithm.\+h.



Referenced by Connect\+Calo\+Hits(), Create\+Clusters(), Read\+Settings(), and Split\+Calo\+Hit\+List().

\index{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}!m\+\_\+use\+Multithread@{m\+\_\+use\+Multithread}}
\index{m\+\_\+use\+Multithread@{m\+\_\+use\+Multithread}!arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm@{arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm}}
\subsubsection[{m\+\_\+use\+Multithread}]{\setlength{\rightskip}{0pt plus 5cm}bool arbor\+\_\+content\+::\+Arbor\+Clustering\+Algorithm\+::m\+\_\+use\+Multithread\hspace{0.3cm}{\ttfamily [private]}}\label{classarbor__content_1_1ArborClusteringAlgorithm_a78dd299f87ff9ba0a194a54646c7ce66}


Whether to use multithreading with ecal-\/hcal-\/muon tools. 



Definition at line 100 of file Arbor\+Clustering\+Algorithm.\+h.



Referenced by Connect\+Calo\+Hits(), and Read\+Settings().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
{\bf Arbor\+Clustering\+Algorithm.\+h}\item 
{\bf Arbor\+Clustering\+Algorithm.\+cc}\end{DoxyCompactItemize}
